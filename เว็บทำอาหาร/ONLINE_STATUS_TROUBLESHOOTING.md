# üîß ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô Online

## üêõ ‡∏õ‡∏±‡∏ç‡∏´‡∏≤:

‡πÄ‡∏°‡∏∑‡πà‡∏≠ Staff login ‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏ï‡πà‡πÉ‡∏ô Admin ‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ **üü¢ Online**

---

## üîç ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:

### 1. ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå Debug
```
‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå: debug_online_status.html
```

‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "üîÑ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô

### 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö 4 ‡∏™‡∏¥‡πà‡∏á:

#### ‚úÖ sessionStorage (Current User)
- ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: `{"username":"staff1","role":"staff"}`
- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ ‚Üí **‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ login**

#### ‚úÖ localStorage (online_users)
- ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ array: `[{"username":"staff1","role":"staff","lastActive":1699...}]`
- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ ‚Üí **‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞**

#### ‚úÖ localStorage (last_login_*)
- ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ: `last_login_staff1: 1699123456789`
- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ ‚Üí **‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤ login**

#### ‚úÖ auth.js Status
- ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô: **‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à**
- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ ‚Üí **auth.js ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÇ‡∏´‡∏•‡∏î**

---

## üîß ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:

### ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà 1: ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ Login ‡∏à‡∏£‡∏¥‡∏á‡πÜ

**‡∏≠‡∏≤‡∏Å‡∏≤‡∏£:**
- sessionStorage ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- online_users ‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**
1. ‡πÄ‡∏õ‡∏¥‡∏î `staff.html`
2. ‡∏Å‡∏î F12 ‡πÄ‡∏õ‡∏¥‡∏î Console
3. ‡∏û‡∏¥‡∏°‡∏û‡πå: `sessionStorage.getItem('restaurant_current_user')`
4. ‡∏ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ `null` ‚Üí ‡∏ï‡πâ‡∏≠‡∏á login ‡πÉ‡∏´‡∏°‡πà

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô Login:**
1. ‡πÄ‡∏õ‡∏¥‡∏î `index.html`
2. ‡πÉ‡∏™‡πà username: `staff1`
3. ‡πÉ‡∏™‡πà password: `staff1`
4. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å role: **Staff**
5. ‡∏Å‡∏î "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö"

---

### ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà 2: Login ‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞

**‡∏≠‡∏≤‡∏Å‡∏≤‡∏£:**
- sessionStorage ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- ‡πÅ‡∏ï‡πà online_users ‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**

#### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
```javascript
// ‡πÄ‡∏õ‡∏¥‡∏î Console (F12) ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ staff.html
// ‡∏û‡∏¥‡∏°‡∏û‡πå:

const currentUser = JSON.parse(sessionStorage.getItem('restaurant_current_user'));
if (currentUser) {
  // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤ login
  localStorage.setItem(`last_login_${currentUser.username}`, Date.now().toString());
  
  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤ online_users
  const onlineUsers = JSON.parse(localStorage.getItem('online_users') || '[]');
  const filteredUsers = onlineUsers.filter(u => u.username !== currentUser.username);
  filteredUsers.push({
    username: currentUser.username,
    role: currentUser.role,
    lastActive: Date.now()
  });
  localStorage.setItem('online_users', JSON.stringify(onlineUsers));
  
  console.log('‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
}
```

#### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: Login ‡πÉ‡∏´‡∏°‡πà
1. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö"
2. Login ‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÉ‡∏ô admin.html

---

### ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà 3: auth.js ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÇ‡∏´‡∏•‡∏î

**‡∏≠‡∏≤‡∏Å‡∏≤‡∏£:**
- ‡πÄ‡∏´‡πá‡∏ô "‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô getCurrentUser()"

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏ü‡∏•‡πå `auth.js` ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö `staff.html`
2. ‡πÄ‡∏õ‡∏¥‡∏î `staff.html` ‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏°‡∏µ `<script src="auth.js"></script>` ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
3. ‡∏•‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î `auth.js` ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå (‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î JavaScript)

---

### ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà 4: Admin ‡πÑ‡∏°‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï

**‡∏≠‡∏≤‡∏Å‡∏≤‡∏£:**
- Staff login ‡πÅ‡∏•‡πâ‡∏ß (‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö)
- ‡πÅ‡∏ï‡πà Admin ‡∏¢‡∏±‡∏á‡πÄ‡∏´‡πá‡∏ô Offline

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**

#### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡∏£‡∏≠ 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏∏‡∏Å 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- ‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà

#### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤ Admin
```
‡∏Å‡∏î F5 ‡∏´‡∏£‡∏∑‡∏≠ Ctrl+R
```

#### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 3: ‡∏≠‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà
1. ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏∑‡πà‡∏ô (‡πÄ‡∏ä‡πà‡∏ô "‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£")
2. ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ó‡∏µ‡πà "‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô"

#### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 4: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Real-time Updates
1. ‡πÄ‡∏õ‡∏¥‡∏î Console (F12) ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ admin.html
2. ‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "‚úÖ ‡πÄ‡∏£‡∏¥‡πà‡∏° Real-time updates" ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
3. ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ ‚Üí ‡∏•‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤ "‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô" ‡πÉ‡∏´‡∏°‡πà

---

## üß™ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢:

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô:
1. **‡πÄ‡∏õ‡∏¥‡∏î debug_online_status.html**
2. **‡πÄ‡∏•‡∏∑‡∏≠‡∏Å staff1 ‡∏à‡∏≤‡∏Å dropdown**
3. **‡∏Å‡∏î "Login"**
4. **‡∏Å‡∏î "üîÑ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö"**
5. **‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà**

### ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô:
```
1. sessionStorage (Current User):
   {"username":"staff1","role":"staff"}

2. localStorage (online_users):
   [{"username":"staff1","role":"staff","lastActive":1699...}]

3. localStorage (last_login_*):
   staff1: 8/11/2568 10:19:50 (0 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß)

4. auth.js Status:
   ‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
```

---

## üìù Checklist:

- [ ] Staff login ‡πÅ‡∏•‡πâ‡∏ß (‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö sessionStorage)
- [ ] ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô online_users (‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö localStorage)
- [ ] ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô last_login_* (‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö localStorage)
- [ ] auth.js ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
- [ ] Admin ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤ "‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô" ‡∏≠‡∏¢‡∏π‡πà
- [ ] ‡πÄ‡∏´‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏ö‡πà‡∏á‡∏ä‡∏µ‡πâ "Real-time Updates" ‡πÉ‡∏ô Admin
- [ ] ‡∏£‡∏≠ 2-3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ

---

## üí° Tips:

### ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö 1: ‡πÉ‡∏ä‡πâ Console
```javascript
// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
console.log('Current User:', sessionStorage.getItem('restaurant_current_user'));
console.log('Online Users:', localStorage.getItem('online_users'));
console.log('Last Login staff1:', localStorage.getItem('last_login_staff1'));
```

### ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö 2: Clear All
```javascript
// ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
localStorage.clear();
sessionStorage.clear();
location.reload();
```

### ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö 3: Force Update
```javascript
// ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ Admin ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ô Console ‡∏Ç‡∏≠‡∏á admin.html)
if (typeof loadUsers === 'function') {
  loadUsers();
  console.log('‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß');
}
```

---

## üéØ ‡∏™‡∏£‡∏∏‡∏õ:

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å:**
1. ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ login ‡∏à‡∏£‡∏¥‡∏á‡πÜ (40%)
2. Login ‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (30%)
3. Admin ‡πÑ‡∏°‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï (20%)
4. auth.js ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÇ‡∏´‡∏•‡∏î (10%)

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡∏ó‡∏µ‡πà‡∏á‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î:**
1. Logout ‡∏ó‡∏±‡πâ‡∏á Staff ‡πÅ‡∏•‡∏∞ Admin
2. Login ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏π‡πà
3. ‡∏£‡∏≠ 2-3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
4. ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô üü¢ Online

---

üéâ **‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå debug_online_status.html ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏!**
