<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£ Sync ‡πÄ‡∏°‡∏ô‡∏π</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 p-8">
  <div class="max-w-4xl mx-auto">
    <h1 class="text-3xl font-bold mb-6">üß™ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£ Sync ‡πÄ‡∏°‡∏ô‡∏π‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Admin ‡πÅ‡∏•‡∏∞ Staff</h1>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Admin Panel -->
      <div class="bg-white p-6 rounded-lg shadow">
        <h2 class="text-xl font-bold mb-4 text-blue-600">üëë Admin Panel</h2>
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium mb-2">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ô‡∏π</label>
            <input type="text" id="menuName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ô‡∏π" class="w-full p-2 border rounded">
          </div>
          <div>
            <label class="block text-sm font-medium mb-2">‡∏£‡∏≤‡∏Ñ‡∏≤</label>
            <input type="number" id="menuPrice" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤" class="w-full p-2 border rounded">
          </div>
          <button onclick="addMenu()" class="w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600">
            ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π
          </button>
          <button onclick="saveMenuToStorage()" class="w-full bg-green-500 text-white py-2 rounded hover:bg-green-600">
            üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏°‡∏ô‡∏π
          </button>
        </div>
        <div class="mt-4">
          <h3 class="font-semibold mb-2">‡πÄ‡∏°‡∏ô‡∏π‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:</h3>
          <div id="adminMenuList" class="space-y-2"></div>
        </div>
      </div>

      <!-- Staff Panel -->
      <div class="bg-white p-6 rounded-lg shadow">
        <h2 class="text-xl font-bold mb-4 text-green-600">üë§ Staff Panel</h2>
        <div class="space-y-4">
          <button onclick="loadMenuFromStorage()" class="w-full bg-green-500 text-white py-2 rounded hover:bg-green-600">
            üîÑ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏°‡∏ô‡∏π
          </button>
          <div class="bg-gray-100 p-3 rounded">
            <p class="text-sm">‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <span id="staffMenuCount" class="font-bold">0</span> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>
            <p class="text-sm">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: <span id="lastUpdate" class="font-bold">-</span></p>
          </div>
        </div>
        <div class="mt-4">
          <h3 class="font-semibold mb-2">‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡πÇ‡∏´‡∏•‡∏î:</h3>
          <div id="staffMenuList" class="space-y-2"></div>
        </div>
      </div>
    </div>

    <!-- Log Panel -->
    <div class="mt-6 bg-gray-800 text-white p-6 rounded-lg">
      <h2 class="text-xl font-bold mb-4">üìã Log</h2>
      <div id="logPanel" class="space-y-1 text-sm font-mono max-h-64 overflow-y-auto"></div>
    </div>

    <!-- Instructions -->
    <div class="mt-6 bg-blue-50 p-6 rounded-lg">
      <h2 class="text-xl font-bold mb-4">üìñ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏î‡∏™‡∏≠‡∏ö</h2>
      <ol class="list-decimal list-inside space-y-2">
        <li>‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏ô‡∏ù‡∏±‡πà‡∏á Admin (‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤ ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î "‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π")</li>
        <li>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏°‡∏ô‡∏π" ‡πÉ‡∏ô‡∏ù‡∏±‡πà‡∏á Admin</li>
        <li>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "üîÑ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏°‡∏ô‡∏π" ‡πÉ‡∏ô‡∏ù‡∏±‡πà‡∏á Staff</li>
        <li>‡∏î‡∏π‡∏ß‡πà‡∏≤‡πÄ‡∏°‡∏ô‡∏π‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡πÉ‡∏ô‡∏ù‡∏±‡πà‡∏á Staff ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà</li>
        <li><strong>‡∏´‡∏£‡∏∑‡∏≠</strong> ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÉ‡∏ô 2 ‡πÅ‡∏ó‡πá‡∏ö ‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£ sync ‡πÅ‡∏ö‡∏ö real-time</li>
      </ol>
    </div>
  </div>

  <script>
    let adminMenuItems = [];
    let staffMenuItems = [];
    let lastMenuHash = '';

    function log(message, type = 'info') {
      const logPanel = document.getElementById('logPanel');
      const time = new Date().toLocaleTimeString();
      const colors = {
        info: 'text-blue-400',
        success: 'text-green-400',
        warning: 'text-yellow-400',
        error: 'text-red-400'
      };
      const entry = document.createElement('div');
      entry.className = colors[type] || colors.info;
      entry.textContent = `[${time}] ${message}`;
      logPanel.appendChild(entry);
      logPanel.scrollTop = logPanel.scrollHeight;
    }

    function addMenu() {
      const name = document.getElementById('menuName').value.trim();
      const price = document.getElementById('menuPrice').value.trim();
      
      if (!name || !price) {
        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤');
        return;
      }

      const newMenu = {
        id: Date.now(),
        name: name,
        price: parseFloat(price)
      };

      adminMenuItems.push(newMenu);
      log(`‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π: ${name} (${price} ‡∏ö‡∏≤‡∏ó)`, 'success');
      renderAdminMenu();
      
      // Clear inputs
      document.getElementById('menuName').value = '';
      document.getElementById('menuPrice').value = '';
    }

    function renderAdminMenu() {
      const list = document.getElementById('adminMenuList');
      list.innerHTML = adminMenuItems.map(item => `
        <div class="flex justify-between items-center p-2 bg-gray-50 rounded">
          <span>${item.name}</span>
          <span class="font-bold">${item.price} ‡∏ö‡∏≤‡∏ó</span>
        </div>
      `).join('');
    }

    function saveMenuToStorage() {
      localStorage.setItem('menuData', JSON.stringify(adminMenuItems));
      localStorage.setItem('menuDataTimestamp', Date.now().toString());
      log(`üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏°‡∏ô‡∏π ${adminMenuItems.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡∏á localStorage`, 'success');
      alert(`‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏°‡∏ô‡∏π ${adminMenuItems.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!`);
    }

    function loadMenuFromStorage() {
      const savedMenu = localStorage.getItem('menuData');
      const timestamp = localStorage.getItem('menuDataTimestamp');
      
      if (savedMenu) {
        staffMenuItems = JSON.parse(savedMenu);
        log(`üîÑ ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏°‡∏ô‡∏π ${staffMenuItems.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≤‡∏Å localStorage`, 'success');
        renderStaffMenu();
        
        document.getElementById('staffMenuCount').textContent = staffMenuItems.length;
        if (timestamp) {
          const date = new Date(parseInt(timestamp));
          document.getElementById('lastUpdate').textContent = date.toLocaleTimeString();
        }
      } else {
        log('‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏ô localStorage', 'warning');
        alert('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏ô‡∏ù‡∏±‡πà‡∏á Admin ‡∏Å‡πà‡∏≠‡∏ô');
      }
    }

    function renderStaffMenu() {
      const list = document.getElementById('staffMenuList');
      if (staffMenuItems.length === 0) {
        list.innerHTML = '<p class="text-gray-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏°‡∏ô‡∏π</p>';
        return;
      }
      list.innerHTML = staffMenuItems.map(item => `
        <div class="flex justify-between items-center p-2 bg-green-50 rounded">
          <span>${item.name}</span>
          <span class="font-bold text-green-600">${item.price} ‡∏ö‡∏≤‡∏ó</span>
        </div>
      `).join('');
    }

    // Auto-sync: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ó‡∏∏‡∏Å 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    setInterval(function() {
      const savedMenu = localStorage.getItem('menuData');
      if (savedMenu && savedMenu !== lastMenuHash) {
        log('üîî ‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏°‡∏ô‡∏π - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥', 'info');
        lastMenuHash = savedMenu;
        loadMenuFromStorage();
      }
    }, 2000);

    // Listen to storage events (for other tabs)
    window.addEventListener('storage', function(e) {
      if (e.key === 'menuData') {
        log('üîî ‡πÄ‡∏°‡∏ô‡∏π‡∏ñ‡∏π‡∏Å‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏à‡∏≤‡∏Å‡πÅ‡∏ó‡πá‡∏ö‡∏≠‡∏∑‡πà‡∏ô', 'info');
        loadMenuFromStorage();
      }
    });

    // Initialize
    log('‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô', 'success');
    
    // Load existing menu if any
    const existingMenu = localStorage.getItem('menuData');
    if (existingMenu) {
      adminMenuItems = JSON.parse(existingMenu);
      renderAdminMenu();
      log(`üìÇ ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏î‡∏¥‡∏° ${adminMenuItems.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`, 'info');
    }
  </script>
</body>
</html>
