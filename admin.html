<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin - ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .sidebar-text {
      transition: opacity 0.3s, transform 0.3s;
      white-space: nowrap;
    }
    .sidebar-collapsed .sidebar-text {
      opacity: 0;
      transform: translateX(-20px);
      display: none;
    }
  </style>
</head>
<body class="bg-red-900 flex">

  <!-- Sidebar -->
  <aside id="sidebar" class="bg-yellow-500 h-screen p-5 flex flex-col transition-all duration-300 w-64">
    <button onclick="toggleSidebar()" class="mb-6 bg-yellow-300 p-2 rounded hover:bg-yellow-400">‚â°</button>
    <h1 class="text-xl font-bold mb-6 text-center sidebar-text">Admin</h1>
    <nav class="flex flex-col space-y-3">
      <button onclick="showSection('menu')" class="flex items-center gap-2 bg-yellow-300 py-2 px-2 rounded hover:bg-yellow-400">
        <span class="sidebar-text">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£</span>
      </button>
      <button onclick="showSection('order')" class="flex items-center gap-2 bg-yellow-300 py-2 px-2 rounded hover:bg-yellow-400">
        <span class="sidebar-text">‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</span>
      </button>
      <button onclick="showSection('report')" class="flex items-center gap-2 bg-yellow-300 py-2 px-2 rounded hover:bg-yellow-400">
        <span class="sidebar-text">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</span>
      </button>
      <button onclick="showSection('history')" class="flex items-center gap-2 bg-yellow-300 py-2 px-2 rounded hover:bg-yellow-400">
        <span class="sidebar-text">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß</span>
      </button>
      <button onclick="logout()" class="flex items-center gap-2 bg-red-500 text-white py-2 px-2 rounded hover:bg-red-600 mt-auto">
        <span class="sidebar-text">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</span>
      </button>

    </nav>
  </aside>

  <!-- Main content -->
  <main id="mainContent" class="flex-1 p-6 transition-all duration-300">

    <!-- Section ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (Admin) -->
    <section id="menuSection">
      <h2 class="text-2xl font-semibold mb-4">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (Admin)</h2>
      <div class="overflow-x-auto bg-white rounded-xl shadow-md mb-6">
        <table class="min-w-full border-collapse">
          <thead class="bg-indigo-100">
            <tr>
              <th class="p-3 border">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</th>
              <th class="p-3 border">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ô‡∏π</th>
              <th class="p-3 border">‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)</th>
              <th class="p-3 border">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
            </tr>
          </thead>
          <tbody id="menuTable"></tbody>
        </table>
      </div>
      <div class="bg-white shadow-md rounded-xl p-4">
        <h3 class="text-lg font-semibold mb-3">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡∏°‡πà</h3>
        <form id="addMenuForm" class="grid md:grid-cols-3 gap-3">
          <input type="text" id="menuName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ô‡∏π" class="border p-2 rounded" required>
          <input type="number" id="menuPrice" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤" class="border p-2 rounded" required>
          <input type="text" id="menuImage" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (URL)" class="border p-2 rounded" required>
          <button class="col-span-3 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π</button>
        </form>
      </div>
    </section>

    <!-- Section ‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£ + ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô -->
    <section id="orderSection" class="hidden">
      <h2 class="text-2xl font-semibold mb-4">‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h2>

      <!-- ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô -->
      <section id="promoSection" class="mb-6">
        <h3 class="text-xl font-semibold mb-2">üî• ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô</h3>
        <div id="promoContainer" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 gap-4"></div>
      </section>

      <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏õ‡∏Å‡∏ï‡∏¥ -->
      <div id="orderMenuContainer" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-6"></div>

      <!-- Order Summary -->
      <div id="orderSummary" class="fixed bottom-0 left-64 w-[calc(100%-16rem)] bg-white shadow-md border-t border-gray-200 p-4 hidden">
        <h2 class="text-lg font-semibold mb-2">üßæ ‡∏™‡∏£‡∏∏‡∏õ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</h2>
        <ul id="orderList" class="text-gray-700 mb-2"></ul>
        <p class="font-semibold">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: <span id="total">0</span> ‡∏ö‡∏≤‡∏ó</p>
        <button onclick="submitOrder()" class="mt-2 w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>
      </div>
    </section>

    <!-- Section ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ -->
    <section id="reportSection" class="hidden"></section>

    <!-- Section ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß -->
    <section id="historySection" class="hidden">
      <h2 class="text-2xl font-semibold mb-4">üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß</h2>
      <div id="historyContainer" class="bg-white p-4 rounded shadow space-y-4"></div>
    </section>


  </main>

  <script>
    // ---------- ‡πÄ‡∏°‡∏ô‡∏π‡∏õ‡∏Å‡∏ï‡∏¥ ----------
    let menuItems = [
      { id: 1, name: "‡∏ô‡πà‡∏≠‡∏á‡πÑ‡∏Å‡πà‡πÄ‡∏•‡πá‡∏Å", price: 15, img: "https://cdn-icons-png.flaticon.com/512/2921/2921822.png" },
      { id: 2, name: "‡∏õ‡∏µ‡∏Å‡πÑ‡∏Å‡πà", price: 15, img: "https://cdn-icons-png.flaticon.com/512/2921/2921822.png" },
      { id: 3, name: "‡∏ô‡πà‡∏≠‡∏á‡πÑ‡∏Å‡πà‡πÉ‡∏´‡∏ç‡πà", price: 29, img: "https://cdn-icons-png.flaticon.com/512/2921/2921825.png" },
      { id: 4, name: "‡πÑ‡∏Å‡πà‡πÑ‡∏£‡πâ‡∏Å‡∏£‡∏∞‡∏î‡∏π‡∏Å", price: 12, img: "https://cdn-icons-png.flaticon.com/512/2921/2921825.png" },
      { id: 5, name: "‡∏™‡∏∞‡πÇ‡∏û‡∏Å‡πÑ‡∏Å‡πà", price: 39, img: "https://cdn-icons-png.flaticon.com/512/2921/2921819.png" },
      { id: 6, name: "‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡πÑ‡∏Å‡πà‡∏ó‡∏≠‡∏î‡πÄ‡∏Å‡πä‡∏≤", price: 49, img: "https://cdn-icons-png.flaticon.com/512/2921/2921819.png" },
      { id: 6, name: "‡∏Ç‡πâ‡∏≤‡∏ß‡πÑ‡∏Å‡πà‡∏ó‡∏≠‡∏î‡πÄ‡∏Å‡πä‡∏≤ + ‡∏ã‡∏≠‡∏™‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ", price: 59, img: "https://cdn-icons-png.flaticon.com/512/2921/2921819.png" },
      // --- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ü‡∏£‡∏ô‡∏ä‡πå‡∏ü‡∏£‡∏≤‡∏¢‡∏™‡πå & ‡∏Æ‡∏≠‡∏ó‡∏î‡∏≠‡∏Å ---
      {id:201, name:"‡πÄ‡∏ü‡∏£‡∏ô‡∏ä‡πå‡∏ü‡∏£‡∏≤‡∏¢‡∏™‡πå S", price:29, img:"https://cdn-icons-png.flaticon.com/512/1046/1046784.png", size:"S"},
      {id:202, name:"‡πÄ‡∏ü‡∏£‡∏ô‡∏ä‡πå‡∏ü‡∏£‡∏≤‡∏¢‡∏™‡πå M", price:39, img:"https://cdn-icons-png.flaticon.com/512/1046/1046784.png", size:"M"},
      {id:203, name:"‡πÄ‡∏ü‡∏£‡∏ô‡∏ä‡πå‡∏ü‡∏£‡∏≤‡∏¢‡∏™‡πå L", price:49, img:"https://cdn-icons-png.flaticon.com/512/1046/1046784.png", size:"L"},
      {id:204, name:"‡∏Æ‡∏≠‡∏ó‡∏î‡∏≠‡∏Å S", price:20, img:"https://cdn-icons-png.flaticon.com/512/1046/1046785.png", size:"S"},
      {id:205, name:"‡∏Æ‡∏≠‡∏ó‡∏î‡∏≠‡∏Å M", price:30, img:"https://cdn-icons-png.flaticon.com/512/1046/1046785.png", size:"M"},
      {id:206, name:"‡∏Æ‡∏≠‡∏ó‡∏î‡∏≠‡∏Å L", price:40, img:"https://cdn-icons-png.flaticon.com/512/1046/1046785.png", size:"L"}
    ];

    let allOrders = JSON.parse(localStorage.getItem("allOrders")) || [];
    let pendingOrders = JSON.parse(localStorage.getItem("pendingOrders")) || [];
    let completedOrders = JSON.parse(localStorage.getItem("completedOrders")) || [];
    const menuTable = document.getElementById("menuTable");
    const addMenuForm = document.getElementById("addMenuForm");
    const orderMenuContainer = document.getElementById("orderMenuContainer");
    const orderSummary = document.getElementById("orderSummary");
    const orderList = document.getElementById("orderList");
    const totalDisplay = document.getElementById("total");
    let order = [];

    // ---------- Admin: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏ô‡∏π ----------
    function renderTable(){
      menuTable.innerHTML="";
      menuItems.forEach((item,index)=>{
        menuTable.innerHTML+=`
          <tr class="text-center">
            <td class="border p-2"><img src="${item.img}" class="w-16 h-16 mx-auto"></td>
            <td class="border p-2">${item.name}</td>
            <td class="border p-2">${item.price}</td>
            <td class="border p-2">
              <button onclick="editMenu(${index})" class="bg-blue-500 text-white px-3 py-1 rounded-lg hover:bg-blue-600 mr-2">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
              <button onclick="deleteMenu(${index})" class="bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-600">‡∏•‡∏ö</button>
            </td>
          </tr>
        `;
      });
    }
    renderTable();

    addMenuForm.addEventListener("submit", e=>{
      e.preventDefault();
      const name=document.getElementById("menuName").value.trim();
      const price=parseFloat(document.getElementById("menuPrice").value);
      const img=document.getElementById("menuImage").value.trim();
      if(!name||!price||!img) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
      menuItems.push({id:Date.now(),name,price,img});
      renderTable(); saveMenu(); renderOrderMenu(); renderPromos(); addMenuForm.reset();
    });

    function editMenu(index){
      const item=menuItems[index];
      const newName=prompt("‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡∏°‡πà:",item.name);
      const newPrice=prompt("‡∏£‡∏≤‡∏Ñ‡∏≤‡πÉ‡∏´‡∏°‡πà:",item.price);
      if(newName&&newPrice){ item.name=newName; item.price=parseFloat(newPrice); renderTable(); saveMenu(); renderOrderMenu(); renderPromos(); }
    }

    function deleteMenu(index){
      if(confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°?")){
        menuItems.splice(index,1);
        renderTable(); saveMenu(); renderOrderMenu(); renderPromos();
      }
    }

    function saveMenu(){ localStorage.setItem("menuData",JSON.stringify(menuItems)); }

    // ---------- ‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (Staff-like) ----------
    function renderOrderMenu(){
      orderMenuContainer.innerHTML="";
      if(menuItems.length===0){
        orderMenuContainer.innerHTML=`<p class="text-center text-gray-500 col-span-full">‚ùå ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</p>`;
        return;
      }
      menuItems.forEach(item=>{
        const card=document.createElement("div");
        card.className="bg-white rounded-xl shadow-md p-4 flex flex-col items-center hover:shadow-lg transition";
        card.innerHTML=`
          <img src="${item.img}" alt="${item.name}" class="w-24 h-24 mb-3 object-cover rounded">
          <h2 class="font-semibold">${item.name}${item.size ? " ("+item.size+")" : ""}</h2>
          <p class="text-gray-600 mb-3">${item.price} ‡∏ö‡∏≤‡∏ó</p>
          <button class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700" onclick="addToOrder(${item.id})">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
        `;
        orderMenuContainer.appendChild(card);
      });
    }

    function addToOrder(id){
      const item=menuItems.find(i=>i.id===id);
      const existing=order.find(o=>o.id===id);
      if(existing) existing.qty++; else order.push({...item,qty:1});
      updateOrderSummary();
    }

    function updateOrderSummary(){
      orderList.innerHTML="";
      let total=0;
      order.forEach(item=>{
        total+=item.price*item.qty;
        const sizeText=item.size ? ` (${item.size})` : "";
        orderList.innerHTML+=`<li class="flex justify-between items-center mb-1">${item.name}${sizeText} x${item.qty} <button onclick="removeItem(${item.id})" class="text-red-500 ml-2">‚úï</button></li>`;
      });
      totalDisplay.textContent=total;
      orderSummary.classList.toggle("hidden",order.length===0);
    }

    function removeItem(id){ order=order.filter(i=>i.id!==id); updateOrderSummary(); }

    function submitOrder(){
      if(order.length===0) return alert("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£");
      const orderData = {
        id: Date.now(),
        timestamp: new Date().toLocaleString(),
        items: order,
        total: totalDisplay.textContent
      };
      pendingOrders.push(orderData);
      localStorage.setItem("pendingOrders", JSON.stringify(pendingOrders));
      alert("‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‚úÖ");
      order = [];
      updateOrderSummary();
      showSection('report');
      updateReport();
    }

    // ---------- ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô ----------
    const promoItems = [
      {id:101,name:"‡πÇ‡∏õ‡∏£‡πÑ‡∏Å‡πà‡∏ä‡∏¥‡πâ‡∏ô", options:[
        {label:"3 ‡∏ä‡∏¥‡πâ‡∏ô = 39 ‡∏ö‡∏≤‡∏ó", price:39, qty:1},
        {label:"6 ‡∏ä‡∏¥‡πâ‡∏ô = 79 ‡∏ö‡∏≤‡∏ó", price:79, qty:1},
        {label:"10 ‡∏ä‡∏¥‡πâ‡∏ô = 129 ‡∏ö‡∏≤‡∏ó", price:129, qty:1},
      ]},
      {id:102,name:"‡πÇ‡∏õ‡∏£‡∏ô‡πà‡∏≠‡∏á‡πÑ‡∏Å‡πà‡πÉ‡∏´‡∏ç‡πà", options:[
        {label:"3 ‡∏ä‡∏¥‡πâ‡∏ô = 79 ‡∏ö‡∏≤‡∏ó", price:79, qty:1},
        {label:"6 ‡∏ä‡∏¥‡πâ‡∏ô = 159 ‡∏ö‡∏≤‡∏ó", price:159, qty:1},
      ]},
      {id:103,name:"‡πÇ‡∏õ‡∏£‡∏™‡∏∞‡πÇ‡∏û‡∏Å‡πÑ‡∏Å‡πà", options:[
        {label:"3 ‡∏ä‡∏¥‡πâ‡∏ô = 99 ‡∏ö‡∏≤‡∏ó", price:99, qty:1},
      ]},
      {id:104,name:"‡πÇ‡∏õ‡∏£‡πÑ‡∏Å‡πà‡πÑ‡∏£‡πâ‡∏Å‡∏£‡∏∞‡∏î‡∏π‡∏Å", options:[
        {label:"5 ‡∏ä‡∏¥‡πâ‡∏ô = 59 ‡∏ö‡∏≤‡∏ó", price:59, qty:1},
        {label:"10 ‡∏ä‡∏¥‡πâ‡∏ô = 99 ‡∏ö‡∏≤‡∏ó", price:99, qty:1},
      ]},
      {id:105,name:"‡πÇ‡∏õ‡∏£‡∏£‡∏ß‡∏°‡∏û‡∏¥‡πÄ‡∏®‡∏©", options:[
        {label:"‡∏™‡∏∞‡πÇ‡∏û‡∏Å 1 + ‡∏ô‡πà‡∏≠‡∏á‡πÉ‡∏´‡∏ç‡πà 2 = 89 ‡∏ö‡∏≤‡∏ó", price:89, qty:1},
         {label:"‡πÄ‡∏ü‡∏£‡∏ô‡∏ä‡πå‡∏ü‡∏£‡∏≤‡∏¢‡∏™‡πå M + ‡πÑ‡∏Å‡πà‡∏ó‡∏≠‡∏î (‡∏ä‡∏¥‡πâ‡∏ô‡∏•‡∏∞ 15) 3 ‡∏ä‡∏¥‡πâ‡∏ô = 69 ‡∏ö‡∏≤‡∏ó", price:69, qty:1},
      ]},
      {id:106,name:"‡πÄ‡∏ã‡∏ï‡∏™‡∏∏‡∏î‡∏Ñ‡∏∏‡πâ‡∏°", options:[
        {label:"‡∏ó‡∏∏‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞ 1  = 109 ‡∏ö‡∏≤‡∏ó", price:109, qty:1},
        {label:"‡∏ó‡∏∏‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞ 2  = 209 ‡∏ö‡∏≤‡∏ó", price:209, qty:1},
        {label:"‡∏ó‡∏∏‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞ 3  = 309 ‡∏ö‡∏≤‡∏ó", price:309, qty:1},
      ]},
      // --- ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡πÄ‡∏ü‡∏£‡∏ô‡∏ä‡πå‡∏ü‡∏£‡∏≤‡∏¢‡∏™‡πå ---
      {id:201, name:"‡πÇ‡∏õ‡∏£‡πÄ‡∏ü‡∏£‡∏ô‡∏ä‡πå‡∏ü‡∏£‡∏≤‡∏¢‡∏™‡πå & ‡∏Æ‡∏≠‡∏ó‡∏î‡∏≠‡∏Å", options:[
        {label:"‡πÄ‡∏ü‡∏£‡∏ô‡∏ä‡πå‡∏ü‡∏£‡∏≤‡∏¢‡∏™‡πå+‡∏Æ‡∏≠‡∏ó‡∏î‡∏≠‡∏Å S = 29", price:29, qty:1, details:"S"},
        {label:"‡πÄ‡∏ü‡∏£‡∏ô‡∏ä‡πå‡∏ü‡∏£‡∏≤‡∏¢‡∏™‡πå+‡∏Æ‡∏≠‡∏ó‡∏î‡∏≠‡∏Å M = 39", price:39, qty:1, details:"M"},
        {label:"‡πÄ‡∏ü‡∏£‡∏ô‡∏ä‡πå‡∏ü‡∏£‡∏≤‡∏¢‡∏™‡πå+‡∏Æ‡∏≠‡∏ó‡∏î‡∏≠‡∏Å L = 49", price:49, qty:1, details:"L"},
      ]}
    ];
    const promoContainer=document.getElementById("promoContainer");

    function renderPromos(){
      promoContainer.innerHTML="";
      promoItems.forEach(promo=>{
        const card=document.createElement("div");
        card.className="bg-yellow-200 p-4 rounded-lg shadow flex flex-col gap-2";
        card.innerHTML=`<h3 class="font-semibold text-lg">${promo.name}</h3>`;
        promo.options.forEach(opt=>{
          const btn=document.createElement("button");
          btn.className="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600";
          btn.textContent=opt.label;
          btn.onclick=()=> addPromoToOrder(promo.name,opt.price,opt.qty,opt.details);
          card.appendChild(btn);
        });
        promoContainer.appendChild(card);
      });
    }

    function addPromoToOrder(name,price,qty,size){
      const existing=order.find(o=>o.name===name && o.price===price && o.size===size);
      if(existing) existing.qty+=qty;
      else order.push({id:Date.now(),name,price,qty,size});
      updateOrderSummary();
    }

    renderOrderMenu(); renderPromos();

    // ---------- ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ ----------
    function updateReport(){
      const reportSection=document.getElementById("reportSection");
      reportSection.innerHTML=`<h2 class="text-2xl font-semibold mb-4">üí∞ ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</h2>`;
      if(pendingOrders.length===0){ reportSection.innerHTML+=`<div class="bg-white p-4 rounded shadow">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</div>`; return; }
      let totalIncome=0;
      const container=document.createElement("div");
      container.className="bg-white p-4 rounded shadow space-y-4";
      const menuSummary={};
      pendingOrders.forEach((ord,index)=>{
        let orderHtml=`<div class="border-b pb-2"><p class="font-semibold">‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå #${index+1} - ${ord.timestamp}</p><ul class="ml-4">`;
        ord.items.forEach(item=>{
          const sizeText=item.size?` (${item.size})`:"";
          orderHtml+=`<li>${item.name}${sizeText} x${item.qty} = ${item.price*item.qty} ‡∏ö‡∏≤‡∏ó</li>`;
          totalIncome+=item.price*item.qty;
          const key=item.name+(item.size?` (${item.size})`:"");
          if(menuSummary[key]) menuSummary[key].qty+=item.qty;
          else menuSummary[key]={price:item.price,qty:item.qty};
        });
        orderHtml+=`</ul>
        <p class="font-bold mt-1">‡∏£‡∏ß‡∏°: ${ord.total} ‡∏ö‡∏≤‡∏ó</p>
        <button onclick="confirmOrder(${index})" class="mt-2 bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700">‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ</button>
        </div>`;
        container.innerHTML+=orderHtml;
      });
      let summaryHtml=`<div class="bg-gray-100 p-3 rounded shadow mt-4"><p class="font-semibold mb-2">üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏ï‡∏≤‡∏°‡πÄ‡∏°‡∏ô‡∏π</p><ul>`;
      for(const name in menuSummary){
        const item=menuSummary[name];
        summaryHtml+=`<li>${name}: ${item.qty} ‡∏ä‡∏¥‡πâ‡∏ô ‡∏£‡∏ß‡∏° ${item.price*item.qty} ‡∏ö‡∏≤‡∏ó</li>`;
      }
      summaryHtml+=`</ul></div>`;
      container.innerHTML+=summaryHtml;
      reportSection.appendChild(container);
      reportSection.innerHTML+=`<p class="mt-4 font-bold text-lg">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${totalIncome} ‡∏ö‡∏≤‡∏ó</p>`;
    }
    function renderHistory(){
      const historyContainer = document.getElementById("historyContainer");
      historyContainer.innerHTML = "";
      if(allOrders.length === 0){
        historyContainer.innerHTML = `<p class="text-gray-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß</p>`;
        return;
      }

      allOrders.forEach((order, index) => {
        let itemsHtml = "";
        order.items.forEach(item => {
          const sizeText = item.size ? ` (${item.size})` : "";
          itemsHtml += `<li>${item.name}${sizeText} x${item.qty} = ${item.price * item.qty} ‡∏ö‡∏≤‡∏ó</li>`;
        });
        historyContainer.innerHTML += `
          <div class="border-b pb-2">
            <p class="font-semibold">üßæ ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå #${index + 1} - ${order.timestamp}</p>
            <ul class="ml-4 list-disc">${itemsHtml}</ul>
            <p class="font-bold mt-1">‡∏£‡∏ß‡∏°: ${order.total} ‡∏ö‡∏≤‡∏ó</p>
          </div>
        `;
      });
    }
    function confirmOrder(index) {
      const confirmed = confirm("‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?");
      if (!confirmed) return;
      // ‡∏¢‡πâ‡∏≤‡∏¢‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏à‡∏≤‡∏Å pendingOrders ‚Üí completedOrders
      completedOrders.push(pendingOrders[index]);
      pendingOrders.splice(index, 1);
      // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏•‡∏±‡∏ö‡∏•‡∏á localStorage
      localStorage.setItem("pendingOrders", JSON.stringify(pendingOrders));
      localStorage.setItem("completedOrders", JSON.stringify(completedOrders));
       // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏ô‡πâ‡∏≤
      updateReport();
      renderHistory();
    }

    // ---------- ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå ----------
    function renderHistory(){
      const historyContainer = document.getElementById("historyContainer");
      historyContainer.innerHTML = "";
      if(completedOrders.length === 0){
        historyContainer.innerHTML = `<p class="text-gray-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß</p>`;
        return;
      }

      completedOrders.forEach((order, index) => {
        let itemsHtml = "";
        order.items.forEach(item => {
          const sizeText = item.size ? ` (${item.size})` : "";
          itemsHtml += `<li>${item.name}${sizeText} x${item.qty} = ${item.price * item.qty} ‡∏ö‡∏≤‡∏ó</li>`;
        });
        historyContainer.innerHTML += `
        <div class="border-b pb-2 mb-2">
          <p class="font-semibold">üßæ ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå #${index + 1} - ${order.timestamp}</p>
          <ul class="ml-4 list-disc">${itemsHtml}</ul>
          <p class="font-bold mt-1">‡∏£‡∏ß‡∏°: ${order.total} ‡∏ö‡∏≤‡∏ó</p>
        </div>
      `;
    });
  }

    // ---------- Sidebar + Logout ----------
    function logout(){ window.location.href="index.html"; }
    function toggleSidebar(){
      const sidebar=document.getElementById("sidebar");
      sidebar.classList.toggle("sidebar-collapsed");
      sidebar.classList.toggle("w-16");
      sidebar.classList.toggle("w-64");
      if(sidebar.classList.contains("w-16")){
        orderSummary.style.left="4rem"; orderSummary.style.width="calc(100% - 4rem)";
      } else {
        orderSummary.style.left="16rem"; orderSummary.style.width="calc(100% - 16rem)";
      }
    }
    function showSection(section){
      document.getElementById("menuSection").classList.add("hidden");
      document.getElementById("orderSection").classList.add("hidden");
      document.getElementById("reportSection").classList.add("hidden");
      document.getElementById("historySection").classList.add("hidden");
      if(section==="menu") document.getElementById("menuSection").classList.remove("hidden");
      if(section==="order") document.getElementById("orderSection").classList.remove("hidden");
      if(section==="report") document.getElementById("reportSection").classList.remove("hidden");
      if(section==="history"){ 
        document.getElementById("historySection").classList.remove("hidden");
        renderHistory(); // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥
      }
    }
    updateReport();
  </script>
</body>
</html>
