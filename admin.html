<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏´‡∏ô‡πâ‡∏≤ Admin - ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100">

  <!-- Navbar -->
  <nav class="bg-indigo-700 text-white p-4 flex justify-between items-center">
    <h1 class="text-xl font-semibold">üë®‚Äçüíº ‡∏´‡∏ô‡πâ‡∏≤‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö (Admin)</h1>
    <button onclick="logout()" class="bg-red-500 px-3 py-1 rounded-lg hover:bg-red-600">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
  </nav>

  <!-- Content -->
  <div class="max-w-5xl mx-auto p-6">
    <h2 class="text-2xl font-bold mb-4">üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h2>

    <!-- Table -->
    <div class="overflow-x-auto bg-white rounded-xl shadow-md">
      <table class="min-w-full border-collapse">
        <thead class="bg-indigo-100">
          <tr>
            <th class="p-3 border">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</th>
            <th class="p-3 border">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ô‡∏π</th>
            <th class="p-3 border">‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)</th>
            <th class="p-3 border">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
          </tr>
        </thead>
        <tbody id="menuTable"></tbody>
      </table>
    </div>

    <!-- Add menu form -->
    <div class="mt-6 bg-white shadow-md rounded-xl p-4">
      <h3 class="text-lg font-semibold mb-3">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡∏°‡πà</h3>
      <form id="addMenuForm" class="grid md:grid-cols-3 gap-3">
        <input type="text" id="menuName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ô‡∏π" class="border p-2 rounded" required>
        <input type="number" id="menuPrice" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤" class="border p-2 rounded" required>
        <input type="text" id="menuImage" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (URL)" class="border p-2 rounded" required>
        <button class="col-span-3 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π</button>
      </form>
    </div>

    <!-- Export Button -->
    <div class="mt-6 text-center">
      <a href="https://docs.google.com/spreadsheets" target="_blank" class="bg-yellow-500 text-white px-5 py-2 rounded-lg hover:bg-yellow-600">üìä ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ (Google Sheet)</a>
    </div>
  </div>

  <script>
    // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏ô‡∏π‡∏à‡∏≤‡∏Å LocalStorage (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
    let menuItems = JSON.parse(localStorage.getItem("menuData")) || [
      { id: 1, name: "‡∏Ç‡πâ‡∏≤‡∏ß‡∏Å‡∏£‡∏∞‡πÄ‡∏û‡∏£‡∏≤‡∏´‡∏°‡∏π", price: 45, img: "https://cdn-icons-png.flaticon.com/512/2921/2921822.png" },
      { id: 2, name: "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡∏Å‡∏∏‡πâ‡∏á", price: 50, img: "https://cdn-icons-png.flaticon.com/512/2921/2921825.png" },
      { id: 3, name: "‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢‡∏Å‡∏∏‡πâ‡∏á‡∏™‡∏î", price: 55, img: "https://cdn-icons-png.flaticon.com/512/2921/2921819.png" }
    ];

    const tableBody = document.getElementById("menuTable");
    const addMenuForm = document.getElementById("addMenuForm");

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏•‡∏á LocalStorage
    function saveToLocal() {
      localStorage.setItem("menuData", JSON.stringify(menuItems));
    }

    // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á
    function renderTable() {
      tableBody.innerHTML = "";
      menuItems.forEach((item, index) => {
        tableBody.innerHTML += `
          <tr class="text-center">
            <td class="border p-2"><img src="${item.img}" class="w-16 h-16 mx-auto"></td>
            <td class="border p-2">${item.name}</td>
            <td class="border p-2">${item.price}</td>
            <td class="border p-2">
              <button onclick="editMenu(${index})" class="bg-blue-500 text-white px-3 py-1 rounded-lg hover:bg-blue-600 mr-2">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
              <button onclick="deleteMenu(${index})" class="bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-600">‡∏•‡∏ö</button>
            </td>
          </tr>
        `;
      });
    }

    renderTable();

    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡∏°‡πà
    addMenuForm.addEventListener("submit", e => {
      e.preventDefault();
      const name = document.getElementById("menuName").value.trim();
      const price = parseFloat(document.getElementById("menuPrice").value);
      const img = document.getElementById("menuImage").value.trim();
      if (!name || !price || !img) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");

      menuItems.push({ id: Date.now(), name, price, img });
      renderTable();
      saveToLocal(); // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°
      addMenuForm.reset();
    });

    // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏°‡∏ô‡∏π
    function editMenu(index) {
      const item = menuItems[index];
      const newName = prompt("‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡∏°‡πà:", item.name);
      const newPrice = prompt("‡∏£‡∏≤‡∏Ñ‡∏≤‡πÉ‡∏´‡∏°‡πà:", item.price);
      if (newName && newPrice) {
        item.name = newName;
        item.price = parseFloat(newPrice);
        renderTable();
        saveToLocal(); // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
      }
    }

    // ‡∏•‡∏ö‡πÄ‡∏°‡∏ô‡∏π
    function deleteMenu(index) {
      if (confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°?")) {
        menuItems.splice(index, 1);
        renderTable();
        saveToLocal(); // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏´‡∏•‡∏±‡∏á‡∏•‡∏ö
      }
    }

    // ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
    function logout() {
      window.location.href = "index.html";
    }
  </script>
</body>
</html>
